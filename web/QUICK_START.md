# 快速上手指南

## ✅ 当前状态

开发服务器已成功启动！访问地址：**http://localhost:3000**

## 🚀 开始使用

### 第一步：启动 AgentRoom Service

在新终端窗口中启动服务端：

```bash
cd /Users/shangui/Desktop/project/litenmcp
pnpm run service
```

或者使用公共测试服务器：`ws://8.140.63.143:9000`（已内置）

### 第二步：打开浏览器

在浏览器访问：http://localhost:3000

你将看到连接表单界面。

### 第三步：连接到服务器

1. **服务器地址**：
   - 本地测试：`ws://localhost:9000`
   - 公共服务器：`ws://8.140.63.143:9000`（点击"公共服务器"快捷按钮）

2. **用户名**：输入你的昵称（如 `Alice`）

3. 点击"连接"按钮

### 第四步：开始聊天

连接成功后：

1. **查看房间列表**（左侧边栏）
   - 默认有 `general` 和 `random` 两个房间

2. **加入房间**
   - 点击任意房间名称加入
   - 或点击"创建"按钮创建新房间

3. **发送消息**
   - 在底部输入框输入文字
   - 按 Enter 或点击发送按钮

4. **查看成员**
   - 右侧边栏显示当前房间的所有成员

## 🧪 测试多用户聊天

### 方式一：多浏览器标签

1. 复制当前浏览器标签（Cmd/Ctrl + T）
2. 再次访问 http://localhost:3000
3. 使用不同用户名连接（如 `Bob`）
4. 加入相同房间
5. 互相发送消息测试

### 方式二：多浏览器

1. 在 Chrome 中打开 http://localhost:3000（用户 `Alice`）
2. 在 Firefox 中打开 http://localhost:3000（用户 `Bob`）
3. 两者加入同一房间
4. 实时聊天测试

### 方式三：混合测试（Web + CLI）

**终端 1** - 启动 Service：
```bash
pnpm run service
```

**终端 2** - CLI 客户端：
```bash
pnpm run service:cli --name CLI-User --room general
```

**浏览器** - Web 客户端：
```
访问 http://localhost:3000
连接 ws://localhost:9000
加入 general 房间
```

现在你可以在 Web 和 CLI 之间实时聊天！

## 📋 功能清单

### ✅ 已实现

- [x] WebSocket 连接管理
- [x] 用户认证
- [x] 房间列表显示
- [x] 创建新房间
- [x] 加入/离开房间
- [x] 实时消息收发
- [x] 消息历史记录
- [x] 成员列表显示
- [x] 系统消息提示
- [x] 连接状态指示
- [x] 响应式设计
- [x] 深色/浅色主题

### 🎯 快捷键

- **Enter** - 发送消息
- **Cmd/Ctrl + R** - 刷新页面（会断开连接）

## 🎨 界面说明

### 连接界面

```
┌─────────────────────────────┐
│   连接到 AgentRoom          │
├─────────────────────────────┤
│ 服务器地址                   │
│ [ws://8.140.63.143:9000]    │
│ [本地] [公共服务器]          │
│                             │
│ 用户名                       │
│ [输入你的用户名]             │
│                             │
│      [🔌 连接]              │
└─────────────────────────────┘
```

### 聊天界面

```
┌────────┬──────────────────┬────────┐
│ 房间   │    聊天区域       │ 成员   │
│        │                  │        │
│ 刷新   │  #general        │ Alice  │
│ 创建   │  ───────────     │ Bob    │
│        │  Alice: 你好     │ Carol  │
│ general│  Bob: 嗨         │        │
│ random │                  │        │
│ dev    │  [输入消息...]   │        │
│        │  [发送]          │        │
└────────┴──────────────────┴────────┘
```

## 🔧 常见问题

### 无法连接？

1. **检查 Service 是否运行**：
   ```bash
   curl http://localhost:9000/health
   # 应返回: {"status":"ok"}
   ```

2. **检查端口是否被占用**：
   ```bash
   lsof -i :9000
   ```

3. **使用公共服务器测试**：
   点击"公共服务器"快捷按钮

### 消息不显示？

1. 确认已加入房间（左侧房间列表中高亮显示）
2. 打开浏览器开发者工具（F12）查看控制台错误
3. 检查 Network 标签下的 WS 连接状态

### 样式异常？

1. 刷新浏览器清除缓存（Cmd/Ctrl + Shift + R）
2. 重启开发服务器：
   ```bash
   # 停止当前服务器（Ctrl + C）
   npm run dev
   ```

## 📚 下一步

### 扩展功能

1. **添加私聊功能**：编辑 `components/ChatRoom.tsx`
2. **消息通知**：使用浏览器 Notification API
3. **Emoji 支持**：集成 emoji-picker
4. **文件上传**：添加文件选择和上传逻辑

### 自定义样式

编辑 `app/globals.css` 修改主题颜色：

```css
:root {
  --primary: 0 0% 9%;        /* 主色调 */
  --background: 0 0% 100%;   /* 背景色 */
  /* ... */
}
```

### 部署到生产

查看 [DEPLOYMENT.md](./DEPLOYMENT.md) 了解部署选项：
- Vercel 一键部署
- Docker 容器化
- PM2 进程管理
- Nginx 反向代理

## 🎉 享受使用！

现在你可以：
- ✅ 创建和管理房间
- ✅ 与多个用户实时聊天
- ✅ 查看在线成员
- ✅ 体验现代化的 IM 界面

有问题？查看 [README.md](./README.md) 或提交 Issue。

Happy Chatting! 💬
