# AgentRoom

[![GitHub](https://img.shields.io/badge/GitHub-agent--room-blue?logo=github)](https://github.com/dxiaoqi/agent-room)
[![npm version](https://img.shields.io/npm/v/agent-room.svg)](https://www.npmjs.com/package/agent-room)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

MCP æµæ¡¥æ¥å·¥å…· + å¯éƒ¨ç½²çš„å®æ—¶æ¶ˆæ¯æœåŠ¡ã€‚

> **GitHubä»“åº“**: [https://github.com/dxiaoqi/agent-room](https://github.com/dxiaoqi/agent-room)
> 
> æ¬¢è¿ Star â­ å’Œè´¡çŒ®ä»£ç ï¼

é¡¹ç›®åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ¨¡å—ï¼š

| æ¨¡å— | ç”¨é€” | è¿è¡Œç¯å¢ƒ |
|------|------|----------|
| **MCP** | è®© IDEï¼ˆCursor/Claude Desktopï¼‰å’Œ CLI å·¥å…·è¿æ¥ä»»æ„ WebSocket/SSE æ•°æ®æµï¼Œæˆ–ç›´æ¥æ¥å…¥ Service | æœ¬åœ° |
| **Service** | å¯éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨çš„å®æ—¶æ¶ˆæ¯æœåŠ¡ï¼Œæ”¯æŒæˆ¿é—´å’Œç§èŠ | äº‘ç«¯ / æœ¬åœ° |

---

## ç›®å½•

- [å®‰è£…](#å®‰è£…)
- [å¿«é€Ÿä½“éªŒ](#å¿«é€Ÿä½“éªŒ)
- [ç½‘é¡µå®¢æˆ·ç«¯](#ç½‘é¡µå®¢æˆ·ç«¯)
- [MCP æ¥å…¥é…ç½®](#mcp-æ¥å…¥é…ç½®)
  - [åœ¨ Cursor ä¸­æ¥å…¥](#åœ¨-cursor-ä¸­æ¥å…¥)
  - [åœ¨ Claude Desktop ä¸­æ¥å…¥](#åœ¨-claude-desktop-ä¸­æ¥å…¥)
  - [è¿æ¥è¿œç¨‹æœåŠ¡](#è¿æ¥è¿œç¨‹æœåŠ¡)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
  - [ç”¨æˆ·å±‚é¢ï¼šå¦‚ä½•ä½¿ç”¨](#ç”¨æˆ·å±‚é¢å¦‚ä½•ä½¿ç”¨)
  - [AI å±‚é¢ï¼šå¯ç”¨èƒ½åŠ›](#ai-å±‚é¢å¯ç”¨èƒ½åŠ›)
- [æ¨¡å—è¯¦è§£](#æ¨¡å—è¯¦è§£)
  - [MCP å·¥å…·å’Œèµ„æº](#mcp-å·¥å…·å’Œèµ„æº)
  - [Service æ¶ˆæ¯æœåŠ¡](#service-æ¶ˆæ¯æœåŠ¡)
- [éƒ¨ç½²ä¸å¼€å‘](#éƒ¨ç½²ä¸å¼€å‘)

---

## å®‰è£…

```bash
# å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰
npm install -g agent-room

# æˆ–ä½œä¸ºé¡¹ç›®ä¾èµ–
npm install agent-room
```

## å¿«é€Ÿä½“éªŒ

### å¯åŠ¨æœåŠ¡ç«¯

```bash
# å¯åŠ¨æ¶ˆæ¯æœåŠ¡ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
agent-room-service
# æˆ–
npx agent-room-service

# è‡ªå®šä¹‰ç«¯å£
PORT=9000 agent-room-service
```

### ä½¿ç”¨å®¢æˆ·ç«¯

**æ–¹å¼ä¸€ï¼šç½‘é¡µå®¢æˆ·ç«¯ï¼ˆæ¨èï¼‰**

```bash
cd web
npm install
npm run dev
```

è®¿é—® http://localhost:3000ï¼Œè¾“å…¥æœåŠ¡å™¨åœ°å€å’Œç”¨æˆ·åå³å¯å¼€å§‹èŠå¤©ã€‚

**æ–¹å¼äºŒï¼šCLI ç»ˆç«¯å®¢æˆ·ç«¯**

```bash
# å¯åŠ¨ CLI èŠå¤©å®¢æˆ·ç«¯
agent-room-cli --name Alice --room general
# æˆ–
npx agent-room-cli
```

**æ–¹å¼ä¸‰ï¼šé›†æˆæµ‹è¯•**

```bash
# è¿è¡ŒæœåŠ¡é›†æˆæµ‹è¯•
pnpm run service:test
```

---

## ç½‘é¡µå®¢æˆ·ç«¯

AgentRoom æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„ç½‘é¡µå®¢æˆ·ç«¯ï¼ŒåŸºäº Next.js å’Œ shadcn/ui æ„å»ºã€‚

### åŠŸèƒ½ç‰¹æ€§

- âœ¨ ç°ä»£åŒ– UI è®¾è®¡ï¼ˆshadcn/ui é£æ ¼ï¼‰
- ğŸ”Œ æ”¯æŒ WebSocket å’Œ SSE è¿æ¥
- ğŸ’¬ å®æ—¶èŠå¤©æ¶ˆæ¯
- ğŸ  å¤šæˆ¿é—´ç®¡ç†ï¼ˆåˆ›å»ºã€åŠ å…¥ã€ç¦»å¼€ï¼‰
- ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨å’Œæˆ¿é—´æˆå‘˜å®æ—¶æ˜¾ç¤º
- ğŸ¨ æ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªé€‚åº”
- ğŸ“± å“åº”å¼è®¾è®¡

### å¯åŠ¨ç½‘é¡µå®¢æˆ·ç«¯

```bash
cd web
npm install
npm run dev
```

è®¿é—® http://localhost:3000

### ä½¿ç”¨è¯´æ˜

1. **è¿æ¥æœåŠ¡å™¨**ï¼šè¾“å…¥ WebSocket åœ°å€ï¼ˆå¦‚ `ws://localhost:9000`ï¼‰å’Œç”¨æˆ·å
2. **åŠ å…¥æˆ¿é—´**ï¼šä»å·¦ä¾§è¾¹æ é€‰æ‹©æˆ¿é—´ï¼Œæˆ–åˆ›å»ºæ–°æˆ¿é—´
3. **å¼€å§‹èŠå¤©**ï¼šåœ¨æ¶ˆæ¯æ¡†è¾“å…¥æ–‡å­—ï¼ŒæŒ‰ Enter å‘é€
4. **æŸ¥çœ‹æˆå‘˜**ï¼šå³ä¾§è¾¹æ æ˜¾ç¤ºå½“å‰æˆ¿é—´çš„æ‰€æœ‰æˆå‘˜

### å¿«é€Ÿè¿æ¥

- **æœ¬åœ°æœåŠ¡**ï¼š`ws://localhost:9000`
- **å…¬å…±æµ‹è¯•æœåŠ¡å™¨**ï¼š`ws://8.140.63.143:9000`

è¯¦ç»†æ–‡æ¡£è§ [web/README.md](./web/README.md)

---

## MCP æ¥å…¥é…ç½®

AgentRoom åŸºäº [Model Context Protocol (MCP)](https://modelcontextprotocol.io/)ï¼Œä¸º AI åŠ©æ‰‹æä¾›å®æ—¶æµè¿æ¥èƒ½åŠ›ã€‚æ”¯æŒ **Cursor**ã€**Claude Desktop** ç­‰æ‰€æœ‰å…¼å®¹ MCP çš„ IDEã€‚

### åœ¨ Cursor ä¸­æ¥å…¥

#### æ–¹å¼ä¸€ï¼šè¿æ¥æœ¬åœ°æˆ–è¿œç¨‹ Serviceï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** ä½ å·²ç»æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ AgentRoom Serviceï¼ˆæœ¬åœ°æˆ–è¿œç¨‹æœåŠ¡å™¨ï¼‰

1. æ‰¾åˆ° Cursor çš„ MCP é…ç½®æ–‡ä»¶ï¼š
   - **å…¨å±€é…ç½®**ï¼š`~/.cursor/mcp.json`ï¼ˆå¯¹æ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
   - **é¡¹ç›®é…ç½®**ï¼š`é¡¹ç›®æ ¹ç›®å½•/.cursor/mcp.json`ï¼ˆä»…å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼‰

2. æ·»åŠ é…ç½®ï¼š

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": [
        "-y",
        "agent-room",
        "--service-url",
        "ws://localhost:9000"
      ]
    }
  }
}
```

> å°† `ws://localhost:9000` æ›¿æ¢ä¸ºä½ çš„ Service åœ°å€ã€‚ä¾‹å¦‚è¿œç¨‹æœåŠ¡å™¨ï¼š`ws://your-server.com:9000`

3. é‡å¯ Cursorï¼ˆ`Cmd/Ctrl + Shift + P` â†’ `Reload Window`ï¼‰

4. éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼šæ‰“å¼€ Cursor èŠå¤©ï¼Œè¾“å…¥ `@agent-room`ï¼Œåº”è¯¥èƒ½çœ‹åˆ° MCP å·¥å…·åˆ—è¡¨

#### æ–¹å¼äºŒï¼šçº¯ MCP æ¨¡å¼ï¼ˆä¸è¿æ¥ Serviceï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** ä»…ä½¿ç”¨ MCP è¿æ¥ä»»æ„ WebSocket/SSE ç«¯ç‚¹ï¼Œä¸ä½¿ç”¨ AgentRoom Service

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": ["-y", "agent-room"]
    }
  }
}
```

#### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘æ¨¡å¼

**é€‚ç”¨åœºæ™¯ï¼š** å¼€å‘è€…è°ƒè¯• AgentRoom æºç 

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": ["tsx", "src/index.ts"],
      "cwd": "/path/to/agent-room"
    }
  }
}
```

### åœ¨ Claude Desktop ä¸­æ¥å…¥

Claude Desktop åŒæ ·æ”¯æŒ MCPï¼Œé…ç½®æ–¹å¼ç±»ä¼¼ï¼š

1. æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼š
   - **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
   - **Linux**: `~/.config/Claude/claude_desktop_config.json`

2. æ·»åŠ é…ç½®ï¼ˆè¿æ¥è¿œç¨‹ Service ç¤ºä¾‹ï¼‰ï¼š

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": [
        "-y",
        "agent-room",
        "--service-url",
        "ws://your-server.com:9000"
      ]
    }
  }
}
```

3. é‡å¯ Claude Desktop

### è¿æ¥è¿œç¨‹æœåŠ¡

å¦‚æœä½ éƒ¨ç½²äº† AgentRoom Service åˆ°äº‘æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ `ws://your-server.com:9000`ï¼‰ï¼Œå¯ä»¥åœ¨ MCP é…ç½®ä¸­æŒ‡å®šï¼š

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": [
        "-y",
        "agent-room",
        "--service-url",
        "ws://your-server.com:9000"
      ]
    }
  }
}
```

è¿™æ · AI å¯ä»¥ç›´æ¥ä½¿ç”¨ `connect_service` å·¥å…·è¿æ¥åˆ°ä½ çš„è¿œç¨‹èŠå¤©å®¤ï¼Œæ— éœ€æ¯æ¬¡æ‰‹åŠ¨è¾“å…¥åœ°å€ã€‚

---

## ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·å±‚é¢ï¼šå¦‚ä½•ä½¿ç”¨

é…ç½®å¥½ MCP åï¼Œä½ å¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€ä¸ AI äº¤äº’ï¼Œè®© AI å¸®ä½ æ“ä½œå®æ—¶æµï¼š

#### åœºæ™¯ 1ï¼šåŠ å…¥èŠå¤©å®¤å¹¶å‚ä¸å¯¹è¯

**ä½ è¯´ï¼š**
```
å¸®æˆ‘è¿æ¥ general æˆ¿é—´ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯è®©æˆ‘ä¹Ÿèƒ½èŠå¤©ï¼Œç„¶åå¸®æˆ‘ç›‘å¬æ¶ˆæ¯
```

**AI ä¼šï¼š**
1. è°ƒç”¨ `connect_service` è¿æ¥åˆ°é…ç½®çš„ Service
2. è°ƒç”¨ `open_chat_terminal` æ‰“å¼€ä¸€ä¸ª CLI èŠå¤©ç»ˆç«¯
3. è°ƒç”¨ `wait_for_message` ç›‘å¬æˆ¿é—´æ¶ˆæ¯
4. å½“æœ‰æ–°æ¶ˆæ¯æ—¶è‡ªåŠ¨é€šçŸ¥ä½ ï¼Œæˆ–æ ¹æ®ä½ çš„è¦æ±‚è‡ªåŠ¨å›å¤

**ç»“æœï¼š**
- ä½ çš„ç»ˆç«¯ä¼šå¼¹å‡ºä¸€ä¸ªèŠå¤©ç•Œé¢ï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°æˆ¿é—´æ¶ˆæ¯å¹¶è¾“å…¥å‚ä¸
- AI åœ¨åå°åŒæ­¥ç›‘å¬ï¼Œå¯ä»¥æ™ºèƒ½å“åº”å…¶ä»–ç”¨æˆ·çš„æ¶ˆæ¯

#### åœºæ™¯ 2ï¼šç›‘å¬è‡ªå®šä¹‰ WebSocket æ•°æ®æµ

**ä½ è¯´ï¼š**
```
å¸®æˆ‘è¿æ¥ ws://localhost:8080/eventsï¼Œç›‘å¬æ‰€æœ‰æ¶ˆæ¯å¹¶è®°å½•ä¸‹æ¥
```

**AI ä¼šï¼š**
1. è°ƒç”¨ `connect_stream` è¿æ¥åˆ°ä½ çš„ WebSocket ç«¯ç‚¹
2. è°ƒç”¨ `wait_for_message` æŒç»­ç›‘å¬
3. å°†æ”¶åˆ°çš„æ¶ˆæ¯å±•ç¤ºç»™ä½ ï¼Œæˆ–è¿›è¡Œæ•°æ®åˆ†æ

#### åœºæ™¯ 3ï¼šå®šæ—¶å‘é€æ¶ˆæ¯

**ä½ è¯´ï¼š**
```
æ¯éš” 30 ç§’å‘ general æˆ¿é—´å‘é€ä¸€æ¡ "ç³»ç»Ÿå¥åº·" çš„æ¶ˆæ¯
```

**AI ä¼šï¼š**
1. è°ƒç”¨ `connect_service` è¿æ¥æˆ¿é—´
2. å¾ªç¯è°ƒç”¨ `send_message` å‘é€æ¶ˆæ¯
3. ä½¿ç”¨ `wait_for_message(timeout: 30000)` å®ç°å®šæ—¶

#### åœºæ™¯ 4ï¼šæŸ¥çœ‹èŠå¤©å†å²

**ä½ è¯´ï¼š**
```
å¸®æˆ‘çœ‹çœ‹ general æˆ¿é—´æœ€è¿‘ 50 æ¡æ¶ˆæ¯
```

**AI ä¼šï¼š**
1. è°ƒç”¨ `connect_service` è¿æ¥æˆ¿é—´
2. è°ƒç”¨ `read_history` è¯»å–å†å²è®°å½•
3. æ ¼å¼åŒ–å±•ç¤ºç»™ä½ 

### AI å±‚é¢ï¼šå¯ç”¨èƒ½åŠ›

é…ç½®å¥½ MCP åï¼ŒAI åŠ©æ‰‹è·å¾—ä»¥ä¸‹èƒ½åŠ›ï¼š

#### 1. å®æ—¶æµè¿æ¥èƒ½åŠ›

- **è¿æ¥ä»»æ„ WebSocket/SSE ç«¯ç‚¹**ï¼šç›‘å¬å®æ—¶æ•°æ®ã€è®¢é˜…äº‹ä»¶æµ
- **å¤šè¿æ¥ç®¡ç†**ï¼šåŒæ—¶ç®¡ç†å¤šä¸ªæ•°æ®æµï¼Œæ¯ä¸ªæµç‹¬ç«‹çš„ channel_id
- **è‡ªåŠ¨é‡è¿**ï¼šç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨é‡æ–°è¿æ¥
- **å¿ƒè·³ä¿æ´»**ï¼šè‡ªåŠ¨å‘é€å¿ƒè·³åŒ…ä¿æŒè¿æ¥æ´»è·ƒ
- **Session æ¢å¤**ï¼šä½¿ç”¨ reconnect token å®ç°æ— ç¼é‡è¿ï¼Œè‡ªåŠ¨æ¢å¤æˆ¿é—´çŠ¶æ€

#### 2. æ¶ˆæ¯æ”¶å‘èƒ½åŠ›

- **å‘é€æ¶ˆæ¯**ï¼šå‘ä»»æ„å·²è¿æ¥çš„é¢‘é“å‘é€æ–‡æœ¬æˆ– JSON æ•°æ®
- **ç­‰å¾…æ¶ˆæ¯**ï¼šé˜»å¡ç­‰å¾…ç‰¹å®šæ¶ˆæ¯ï¼ˆæ”¯æŒå…³é”®è¯è¿‡æ»¤ã€è¶…æ—¶æ§åˆ¶ï¼‰
- **å†å²å›æº¯**ï¼šæŸ¥è¯¢é¢‘é“å†å²æ¶ˆæ¯ï¼Œæ”¯æŒæ•°é‡é™åˆ¶å’Œæ ¼å¼åŒ–
- **æœªè¯»è¿½è¸ª**ï¼šæ™ºèƒ½æ ‡è®°å·²è¯»/æœªè¯»æ¶ˆæ¯ï¼Œé¿å…é‡å¤å¤„ç†
- **å®æ—¶é€šçŸ¥**ï¼šæ”¶åˆ°æ–°æ¶ˆæ¯æ—¶é€šè¿‡ MCP é€šçŸ¥æœºåˆ¶æ¨é€
- **æ™ºèƒ½è§£ç **ï¼šService æ¶ˆæ¯è‡ªåŠ¨è½¬æ¢ä¸ºäººç±»å¯è¯»æ ¼å¼

#### 3. èŠå¤©å®¤åä½œèƒ½åŠ›

- **å¿«é€Ÿæ¥å…¥**ï¼šä¸€é”®è¿æ¥ AgentRoom Serviceï¼Œè‡ªåŠ¨å®Œæˆè®¤è¯å’Œæˆ¿é—´åŠ å…¥
- **å¤šæˆ¿é—´ç®¡ç†**ï¼šåŒæ—¶åŠ å…¥å¤šä¸ªèŠå¤©å®¤ï¼Œåœ¨ä¸åŒæˆ¿é—´å‘é€å’Œæ¥æ”¶æ¶ˆæ¯
- **æˆ¿é—´æ“ä½œ**ï¼šåˆ—å‡ºã€åˆ›å»ºã€åŠ å…¥ã€ç¦»å¼€æˆ¿é—´ï¼Œæ”¯æŒå¯†ç ä¿æŠ¤çš„ç§å¯†æˆ¿é—´
- **æŒä¹…åŒ–æˆ¿é—´**ï¼šåˆ›å»ºæ°¸ä¹…æˆ¿é—´ï¼Œå³ä½¿æ— äººä¹Ÿä¸ä¼šè¢«åˆ é™¤
- **ç§èŠåŠŸèƒ½**ï¼šå‘é€ç‚¹å¯¹ç‚¹ç§å¯†æ¶ˆæ¯
- **ç”¨æˆ·äº¤äº’**ï¼šä¸ºç”¨æˆ·æ‰“å¼€ CLI ç»ˆç«¯ï¼Œå®ç° AI + ç”¨æˆ·è”åŠ¨
- **æˆå‘˜ç®¡ç†**ï¼šæŸ¥çœ‹æˆ¿é—´æˆå‘˜åˆ—è¡¨ã€åœ¨çº¿ç”¨æˆ·ç»Ÿè®¡

#### 4. çŠ¶æ€æŸ¥è¯¢èƒ½åŠ›

- **è¿æ¥çŠ¶æ€**ï¼šæŸ¥çœ‹æ‰€æœ‰æ´»è·ƒè¿æ¥çš„è¯¦ç»†ä¿¡æ¯
- **æ¶ˆæ¯ç»Ÿè®¡**ï¼šè·å–é¢‘é“çš„æ¶ˆæ¯æ•°é‡ã€è¿æ¥æ—¶é•¿ç­‰æŒ‡æ ‡
- **æˆ¿é—´ä¿¡æ¯**ï¼šæŸ¥è¯¢æˆ¿é—´æˆå‘˜ã€åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€æˆ¿é—´è¯¦æƒ…
- **æœªè¯»çŠ¶æ€**ï¼šæ£€æŸ¥æ¯ä¸ªé¢‘é“çš„æœªè¯»æ¶ˆæ¯æ•°é‡
- **æ€§èƒ½ç›‘æ§**ï¼šè®¿é—® `metrics://snapshot` è·å–è¯¦ç»†çš„æ€§èƒ½å’Œé”™è¯¯æŒ‡æ ‡

#### 5. æ™ºèƒ½å†³ç­–èƒ½åŠ›

AI å¯ä»¥æ ¹æ®æ”¶åˆ°çš„æ¶ˆæ¯å†…å®¹ï¼š
- **è‡ªåŠ¨åˆ¤æ–­**æ˜¯å¦éœ€è¦å›å¤
- **æå–å…³é”®ä¿¡æ¯**è¿›è¡Œæ•°æ®åˆ†æ
- **è§¦å‘å…¶ä»–æ“ä½œ**ï¼ˆå¦‚è°ƒç”¨å…¶ä»– APIã€æ‰§è¡Œå‘½ä»¤ï¼‰
- **åè°ƒå¤šä¸ªè¿æ¥**å®ç°å¤æ‚çš„æ•°æ®æµè½¬
- **æ™ºèƒ½è¿‡æ»¤**ï¼šä½¿ç”¨å…³é”®è¯è¿‡æ»¤ç›‘å¬ç‰¹å®šç±»å‹çš„æ¶ˆæ¯
- **é˜²é‡å¤å¤„ç†**ï¼šåˆ©ç”¨æœªè¯»æ¶ˆæ¯è¿½è¸ªé¿å…é‡å¤å“åº”

#### 6. å¯é æ€§ä¸æ€§èƒ½

- **è‡ªåŠ¨é‡è¿æœºåˆ¶**ï¼šè¿æ¥æ–­å¼€æ—¶è‡ªåŠ¨é‡è¿ï¼Œæ— éœ€äººå·¥å¹²é¢„
- **Session æ¢å¤**ï¼šé‡è¿åè‡ªåŠ¨æ¢å¤æˆ¿é—´çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯
- **Token å­˜å‚¨**ï¼šæŒä¹…åŒ–ä¿å­˜ reconnect tokenï¼Œæ”¯æŒè·¨ä¼šè¯æ¢å¤
- **æ€§èƒ½ç›‘æ§**ï¼šå†…ç½® metrics ç³»ç»Ÿï¼Œè¿½è¸ªè¿æ¥æ•°ã€æ¶ˆæ¯æ•°ã€å»¶è¿Ÿç­‰æŒ‡æ ‡
- **é”™è¯¯è¿½è¸ª**ï¼šè®°å½•æ‰€æœ‰é”™è¯¯å’Œå¼‚å¸¸ï¼Œä¾¿äºè°ƒè¯•å’Œæ’æŸ¥
- **èµ„æºä¼˜åŒ–**ï¼šæ»‘åŠ¨çª—å£æ¶ˆæ¯ç¼“å†²ï¼ˆæœ€å¤š 50 æ¡ï¼‰ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º

#### å…¸å‹åº”ç”¨åœºæ™¯

| åœºæ™¯ | AI èƒ½åŠ› | ç¤ºä¾‹ |
|------|--------|------|
| **èŠå¤©åŠ©æ‰‹** | ç›‘å¬èŠå¤©å®¤æ¶ˆæ¯ï¼Œæ™ºèƒ½å›å¤ | AI è‡ªåŠ¨å›ç­”æŠ€æœ¯é—®é¢˜ |
| **æ•°æ®ç›‘æ§** | è¿æ¥ç›‘æ§ç³»ç»Ÿçš„ WebSocketï¼Œå®æ—¶åˆ†ææ•°æ® | å¼‚å¸¸æ—¶è‡ªåŠ¨å‘Šè­¦ |
| **å¤šäººåä½œ** | åœ¨å¤šä¸ªæˆ¿é—´ä¹‹é—´ä¼ é€’ä¿¡æ¯ | è·¨å›¢é˜Ÿæ¶ˆæ¯åŒæ­¥ |
| **å®šæ—¶ä»»åŠ¡** | å®šæ—¶å‘é€æé†’æˆ–æŠ¥å‘Š | æ¯æ—¥å¥åº·æ£€æŸ¥é€šçŸ¥ |
| **äº‹ä»¶å“åº”** | ç›‘å¬ç‰¹å®šäº‹ä»¶å¹¶è§¦å‘æ“ä½œ | CI/CD æ„å»ºå®Œæˆåé€šçŸ¥ |
| **æˆ¿é—´ç®¡ç†** | åˆ›å»ºä¸´æ—¶è®¨è®ºç»„ã€ç®¡ç†æˆå‘˜ | é¡¹ç›®å¯åŠ¨ä¼šè®®å®¤ |
| **æœªè¯»æé†’** | è¿½è¸ªæœªè¯»æ¶ˆæ¯ï¼Œå®šæœŸæ±‡æ€» | æ¯å°æ—¶æ±‡æŠ¥æ–°æ¶ˆæ¯ |
| **æ€§èƒ½è¯Šæ–­** | ç›‘æ§ç³»ç»ŸæŒ‡æ ‡ï¼Œå‘ç°æ€§èƒ½ç“¶é¢ˆ | è¿æ¥å»¶è¿Ÿå‘Šè­¦ |

---

## æ¨¡å—è¯¦è§£

### MCP å·¥å…·å’Œèµ„æº

AgentRoom MCP æä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·é›†ï¼Œè®© AI å¯ä»¥æ“ä½œå®æ—¶æ•°æ®æµã€‚

#### ğŸš€ æ–°å¢æ ¸å¿ƒåŠŸèƒ½

**v0.1.0+ é‡ç‚¹æ›´æ–°ï¼š**

1. **æˆ¿é—´ç®¡ç†ç³»ç»Ÿ**
   - åˆ—å‡ºã€åˆ›å»ºã€åŠ å…¥ã€ç¦»å¼€æˆ¿é—´
   - æ”¯æŒå¯†ç ä¿æŠ¤çš„ç§å¯†æˆ¿é—´
   - æŒä¹…åŒ–æˆ¿é—´é€‰é¡¹ï¼ˆæ°¸ä¸åˆ é™¤ï¼‰
   - å®æ—¶æˆå‘˜åˆ—è¡¨å’Œåœ¨çº¿çŠ¶æ€

2. **æœªè¯»æ¶ˆæ¯è¿½è¸ª**
   - æ™ºèƒ½æ ‡è®°å·²è¯»/æœªè¯»çŠ¶æ€
   - é¿å…é‡å¤å¤„ç†åŒä¸€æ¡æ¶ˆæ¯
   - æ”¯æŒæ‰¹é‡è·å–æœªè¯»æ¶ˆæ¯

3. **è‡ªåŠ¨é‡è¿ä¸ Session æ¢å¤**
   - è¿æ¥æ–­å¼€æ—¶è‡ªåŠ¨é‡è¿
   - ä½¿ç”¨ reconnect token æ¢å¤ä¼šè¯
   - è‡ªåŠ¨æ¢å¤å·²åŠ å…¥çš„æˆ¿é—´çŠ¶æ€
   - æ— ç¼çš„ç”¨æˆ·ä½“éªŒ

4. **æ€§èƒ½ç›‘æ§ä¸æŒ‡æ ‡**
   - `metrics://snapshot` èµ„æºæä¾›è¯¦ç»†æŒ‡æ ‡
   - è¿½è¸ªè¿æ¥æ•°ã€æ¶ˆæ¯æ•°ã€é”™è¯¯æ•°
   - å»¶è¿Ÿå’Œæ€§èƒ½ç›´æ–¹å›¾ï¼ˆp50/p95/p99ï¼‰
   - å¸®åŠ©è¯Šæ–­æ€§èƒ½é—®é¢˜

5. **æ™ºèƒ½æ¶ˆæ¯è§£ç **
   - Service åè®®æ¶ˆæ¯è‡ªåŠ¨è½¬æ¢ä¸ºäººç±»å¯è¯»æ ¼å¼
   - èŠå¤©æ¶ˆæ¯ã€ç³»ç»Ÿäº‹ä»¶ã€å“åº”è‡ªåŠ¨æ ¼å¼åŒ–
   - æ–¹ä¾¿ AI ç†è§£å’Œå¤„ç†

#### æ ¸å¿ƒå·¥å…·

| å·¥å…· | è¯´æ˜ | å…¸å‹ç”¨æ³• |
|------|------|----------|
| **åŸºç¡€è¿æ¥** | | |
| `connect_stream` | è¿æ¥ä»»æ„ WebSocket (`ws://`) æˆ– SSE (`http://`) ç«¯ç‚¹ | ç›‘å¬è‡ªå®šä¹‰æ•°æ®æµã€ç¬¬ä¸‰æ–¹ WebSocket API |
| `connect_service` | **è¿æ¥ AgentRoom Service**ï¼Œè‡ªåŠ¨å®Œæˆè®¤è¯å’ŒåŠ å…¥æˆ¿é—´ | åŠ å…¥èŠå¤©å®¤ã€å‚ä¸å¤šäººåä½œ |
| `disconnect_stream` | æ–­å¼€æŒ‡å®šé¢‘é“ | æ¸…ç†è¿æ¥ã€åˆ‡æ¢æˆ¿é—´ |
| `list_connections` | åˆ—å‡ºæ‰€æœ‰æ´»è·ƒè¿æ¥åŠçŠ¶æ€ | æŸ¥çœ‹å½“å‰è¿æ¥ã€è°ƒè¯• |
| **æ¶ˆæ¯æ“ä½œ** | | |
| `send_message` | å‘é¢‘é“å‘é€æ¶ˆæ¯ | å‘é€èŠå¤©æ¶ˆæ¯ã€æ¨é€æ•°æ® |
| `read_history` | æŸ¥çœ‹é¢‘é“å†å²æ¶ˆæ¯ï¼ˆæ”¯æŒæ•°é‡ã€è¿‡æ»¤ã€æ ¼å¼ï¼‰ | å›æº¯èŠå¤©è®°å½•ã€æ•°æ®åˆ†æ |
| `get_unread_messages` | **è·å–æœªè¯»æ¶ˆæ¯**ï¼Œæ”¯æŒæ ‡è®°å·²è¯» | æ£€æŸ¥æ–°æ¶ˆæ¯ã€è¿½è¸ªæœªè¯»çŠ¶æ€ |
| `wait_for_message` | é˜»å¡ç­‰å¾…ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼ˆæ”¯æŒå…³é”®è¯è¿‡æ»¤ï¼‰ | ç›‘å¬ç‰¹å®šäº‹ä»¶ã€ç­‰å¾…å“åº” |
| `watch_stream` | è¿æ¥ + ç­‰å¾…ç¬¬ä¸€æ¡æ¶ˆæ¯ | å¿«é€Ÿæµ‹è¯•è¿æ¥ã€éªŒè¯æ•°æ®æµ |
| **æˆ¿é—´ç®¡ç†** | | |
| `list_rooms` | **åˆ—å‡ºæ‰€æœ‰æˆ¿é—´**ï¼ˆåç§°ã€æˆå‘˜æ•°ã€æ˜¯å¦éœ€è¦å¯†ç ï¼‰ | æµè§ˆå¯ç”¨æˆ¿é—´ |
| `create_room` | **åˆ›å»ºæ–°æˆ¿é—´**ï¼ˆæ”¯æŒå¯†ç ä¿æŠ¤ã€æŒä¹…åŒ–ï¼‰ | å»ºç«‹ç§å¯†è®¨è®ºç»„ |
| `join_room` | **åŠ å…¥æˆ¿é—´**ï¼ˆè‡ªåŠ¨åˆ‡æ¢å½“å‰æ´»è·ƒæˆ¿é—´ï¼‰ | è¿›å…¥ä¸åŒè®¨è®ºç»„ |
| `leave_room` | **ç¦»å¼€æˆ¿é—´** | é€€å‡ºè®¨è®ºç»„ |
| **ç”¨æˆ·äº¤äº’** | | |
| `open_chat_terminal` | **æ‰“å¼€ CLI èŠå¤©ç»ˆç«¯** | è®©ç”¨æˆ·å®æ—¶å‚ä¸èŠå¤© |

#### å·¥å…·è¯¦è§£

**`connect_service` vs `connect_stream`**

| ç‰¹æ€§ | `connect_service` | `connect_stream` |
|------|-------------------|------------------|
| ç›®æ ‡ | AgentRoom Service | ä»»æ„ WebSocket/SSE |
| è®¤è¯ | è‡ªåŠ¨å®Œæˆ | éœ€æ‰‹åŠ¨å‘é€ |
| æ¶ˆæ¯æ ¼å¼ | è‡ªåŠ¨åŒ…è£…ä¸ºèŠå¤©åè®® | åŸå§‹ JSON/æ–‡æœ¬ |
| é€‚ç”¨åœºæ™¯ | èŠå¤©å®¤ã€å¤šäººåä½œ | è‡ªå®šä¹‰æ•°æ®æµã€ç¬¬ä¸‰æ–¹ API |

**`open_chat_terminal` â€” ç”¨æˆ·å‚ä¸çš„å…³é”®**

è¿™ä¸ªå·¥å…·ä¼šåœ¨ç”¨æˆ·çš„ç»ˆç«¯ä¸­è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ª CLI èŠå¤©ç•Œé¢ï¼Œè®©ç”¨æˆ·å¯ä»¥ï¼š
- å®æ—¶çœ‹åˆ°æˆ¿é—´æ¶ˆæ¯
- è¾“å…¥æ–‡å­—å‚ä¸èŠå¤©
- ä½¿ç”¨ `/join`ã€`/leave`ã€`/dm` ç­‰å‘½ä»¤
- ä¸ AI å…±åŒå‚ä¸åŒä¸€ä¸ªèŠå¤©å®¤

**ç¤ºä¾‹ï¼šAI + ç”¨æˆ·è”åŠ¨**

```
ç”¨æˆ·è¯´ï¼š"å¸®æˆ‘åŠ å…¥ dev-ops æˆ¿é—´"

AI æ“ä½œï¼š
1. connect_service(room: "dev-ops", name: "AI-Assistant")
2. open_chat_terminal(room: "dev-ops", name: "User-Alice")  â† æ‰“å¼€ç”¨æˆ·ç»ˆç«¯
3. wait_for_message() å¼€å§‹ç›‘å¬

ç»“æœï¼š
- AI åœ¨åå°ç›‘å¬æˆ¿é—´æ¶ˆæ¯
- ç”¨æˆ·åœ¨ç»ˆç«¯çœ‹åˆ°å®æ—¶èŠå¤©ç•Œé¢
- åŒæ–¹åŒæ—¶åœ¨åŒä¸€ä¸ªæˆ¿é—´ä¸­
```

#### MCP èµ„æº

AI å¯ä»¥é€šè¿‡èµ„æº URI å¿«é€Ÿè·å–çŠ¶æ€ä¿¡æ¯ï¼š

| èµ„æº URI | è¯´æ˜ | ç¤ºä¾‹ |
|----------|------|------|
| `connection://status` | æ‰€æœ‰è¿æ¥çš„çŠ¶æ€æ‘˜è¦ | æŸ¥çœ‹å½“å‰æ´»è·ƒçš„æ‰€æœ‰é¢‘é“ |
| `connection://{channel_id}/status` | å•ä¸ªé¢‘é“çš„è¯¦ç»†çŠ¶æ€ | æŸ¥çœ‹è¿æ¥æ—¶é•¿ã€æ¶ˆæ¯æ•° |
| `stream://{channel_id}/messages/recent` | é¢‘é“æœ€è¿‘ 50 æ¡æ¶ˆæ¯ | å¿«é€Ÿå›æº¯å†å² |
| `stream://{channel_id}/messages/latest` | é¢‘é“æœ€æ–°ä¸€æ¡æ¶ˆæ¯ | æ£€æŸ¥æœ€æ–°çŠ¶æ€ |
| `metrics://snapshot` | **æ€§èƒ½å’Œé”™è¯¯æŒ‡æ ‡**ï¼ˆè®¡æ•°å™¨ã€å»¶è¿Ÿç›´æ–¹å›¾ï¼‰ | è¯Šæ–­æ€§èƒ½é—®é¢˜ã€ç›‘æ§ç³»ç»Ÿå¥åº· |

#### å·¥å…·ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼šç®€å•èŠå¤©ï¼ˆä½¿ç”¨ connect_serviceï¼‰**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘è¿æ¥ general æˆ¿é—´ï¼Œç”¨æˆ·å AI-Bot
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// 1. è¿æ¥ Serviceï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„ --service-urlï¼‰
connect_service({
  room: "general",
  name: "AI-Bot"
})

// 2. è¿”å› channel_idï¼Œä¾‹å¦‚ "ch-abc123"

// 3. ç›‘å¬æ¶ˆæ¯
wait_for_message({
  channel_id: "ch-abc123",
  timeout: 30000
})

// 4. å‘é€æ¶ˆæ¯
send_message({
  channel_id: "ch-abc123",
  message: "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ AI-Bot"
})
```

**ç¤ºä¾‹ 2ï¼šç›‘å¬è‡ªå®šä¹‰ WebSocketï¼ˆä½¿ç”¨ connect_streamï¼‰**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘è¿æ¥ ws://api.example.com/eventsï¼Œç›‘å¬æ‰€æœ‰äº‹ä»¶
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// 1. è¿æ¥åŸå§‹ WebSocket
connect_stream({
  url: "ws://api.example.com/events",
  protocol_type: "websocket"
})

// 2. ç­‰å¾…æ¶ˆæ¯
wait_for_message({
  channel_id: "ch-xyz789",
  format: "json"  // ä»¥ JSON æ ¼å¼è§£æ
})
```

**ç¤ºä¾‹ 3ï¼šæ‰“å¼€ç”¨æˆ·ç»ˆç«¯**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘åŠ å…¥ general æˆ¿é—´ï¼Œæˆ‘ä¹Ÿæƒ³å‚ä¸èŠå¤©
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// 1. AI è‡ªå·±è¿æ¥
connect_service({ room: "general", name: "AI-Assistant" })

// 2. ä¸ºç”¨æˆ·æ‰“å¼€ç»ˆç«¯
open_chat_terminal({
  room: "general",
  name: "User-Alice",
  url: "ws://localhost:9000"  // å¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„ service-url
})

// 3. ç›‘å¬æ¶ˆæ¯
wait_for_message({ channel_id: "ch-abc123" })
```

**ç¤ºä¾‹ 4ï¼šå¤šæˆ¿é—´ç®¡ç†**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘åˆ—å‡ºæ‰€æœ‰æˆ¿é—´ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º "ai-research" çš„ç§å¯†æˆ¿é—´ï¼Œç„¶ååŠ å…¥å®ƒ
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// 1. å…ˆè¿æ¥æœåŠ¡
connect_service({ room: "general", name: "AI-Bot" })

// 2. åˆ—å‡ºæ‰€æœ‰æˆ¿é—´
list_rooms({ channel_id: "ch-abc123" })
// è¿”å›ï¼š
// â€¢ #general â€” General Discussion
//   Members: 5
// â€¢ #random â€” Random Chat
//   Members: 2

// 3. åˆ›å»ºæ–°æˆ¿é—´ï¼ˆå¸¦å¯†ç ï¼‰
create_room({
  channel_id: "ch-abc123",
  room_id: "ai-research",
  name: "AI Research Group",
  description: "Discussing latest AI developments",
  password: "secret123",
  persistent: true  // æŒä¹…åŒ–ï¼Œå³ä½¿æ— äººä¹Ÿä¸åˆ é™¤
})

// 4. åŠ å…¥æ–°æˆ¿é—´
join_room({
  channel_id: "ch-abc123",
  room_id: "ai-research",
  password: "secret123"
})

// 5. ç°åœ¨å‘é€æ¶ˆæ¯ä¼šè‡ªåŠ¨è·¯ç”±åˆ°æ–°æˆ¿é—´
send_message({ channel_id: "ch-abc123", payload: "æ¬¢è¿æ¥åˆ° AI ç ”ç©¶ç»„ï¼" })
```

**ç¤ºä¾‹ 5ï¼šæœªè¯»æ¶ˆæ¯è¿½è¸ª**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘æ£€æŸ¥ general æˆ¿é—´æœ‰æ²¡æœ‰æ–°æ¶ˆæ¯ï¼Œå¦‚æœæœ‰å°±å›å¤ä¸€ä¸‹
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// 1. è¿æ¥æœåŠ¡
connect_service({ room: "general", name: "AI-Bot" })

// 2. è·å–æœªè¯»æ¶ˆæ¯ï¼ˆè‡ªåŠ¨æ ‡è®°ä¸ºå·²è¯»ï¼‰
get_unread_messages({
  channel_id: "ch-abc123",
  mark_as_read: true,
  format: "text"
})
// è¿”å›ï¼š
// 3 unread message(s):
// [10:30:05] Alice: æœ‰äººåœ¨å—ï¼Ÿ
// [10:31:22] Bob: æˆ‘åœ¨
// [10:32:10] Alice: èƒ½å¸®æˆ‘çœ‹çœ‹è¿™ä¸ªé—®é¢˜å—ï¼Ÿ

// 3. å¦‚æœæœ‰æœªè¯»æ¶ˆæ¯ï¼Œå›å¤
send_message({
  channel_id: "ch-abc123",
  payload: "æˆ‘åœ¨ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©çš„å—ï¼Ÿ"
})

// 4. å†æ¬¡è·å–æœªè¯»æ¶ˆæ¯ï¼Œåº”è¯¥ä¸ºç©º
get_unread_messages({ channel_id: "ch-abc123" })
// è¿”å›ï¼šNo unread messages
```

**ç¤ºä¾‹ 6ï¼šæ€§èƒ½ç›‘æ§**

ç”¨æˆ·è¯´ï¼š
```
å¸®æˆ‘æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡
```

AI è‡ªåŠ¨è°ƒç”¨ï¼š
```javascript
// è¯»å– metrics èµ„æº
readResource({ uri: "metrics://snapshot" })

// è¿”å› JSON æ ¼å¼çš„æŒ‡æ ‡ï¼š
{
  "counters": {
    "connections.total": 15,
    "connections.active": 12,
    "messages.received": 1523,
    "messages.sent": 892,
    "errors.connection": 2,
    "errors.auth": 0
  },
  "histograms": {
    "connect.duration_ms": {
      "count": 15,
      "min": 45,
      "max": 320,
      "avg": 125,
      "p50": 110,
      "p95": 280,
      "p99": 315
    },
    "message.latency_ms": {
      "count": 1523,
      "min": 1,
      "max": 85,
      "avg": 12,
      "p50": 8,
      "p95": 35,
      "p99": 72
    }
  }
}
```

#### ç‹¬ç«‹è¿è¡Œ MCP æœåŠ¡å™¨ï¼ˆä¸é€šè¿‡ IDEï¼‰

```bash
# stdio æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œä¾› MCP å®¢æˆ·ç«¯è¿æ¥ï¼‰
agent-room
# æˆ–
npx agent-room

# HTTP æ¨¡å¼ï¼ˆè¿œç¨‹éƒ¨ç½² MCP æœåŠ¡å™¨ï¼‰
agent-room --transport http --port 3000

# è¿æ¥åˆ°æŒ‡å®š Service
agent-room --service-url ws://your-server.com:9000
```

---

### Service æ¶ˆæ¯æœåŠ¡

AgentRoom Service æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹éƒ¨ç½²çš„å®æ—¶æ¶ˆæ¯æœåŠ¡ï¼Œæä¾›æˆ¿é—´èŠå¤©å’Œç§èŠèƒ½åŠ›ã€‚

### å¯åŠ¨

```bash
# é»˜è®¤ç«¯å£ 9000
agent-room-service

# è‡ªå®šä¹‰ç«¯å£å’Œç»‘å®šåœ°å€
PORT=8080 HOST=0.0.0.0 agent-room-service
```

å¯åŠ¨ååŒæ—¶æä¾› **WebSocket** å’Œ **HTTP API** ä¸¤ä¸ªæ¥å£ï¼ˆåŒä¸€ç«¯å£ï¼‰ã€‚

### CLI èŠå¤©å®¢æˆ·ç«¯

é…å¥—ç»ˆç«¯å®¢æˆ·ç«¯ï¼Œæä¾›å®Œæ•´çš„èŠå¤©å®¤ä½“éªŒï¼š

```bash
# å¯åŠ¨ CLIï¼ˆé»˜è®¤è¿æ¥ localhost:9000ï¼ŒåŠ å…¥ #generalï¼‰
agent-room-cli

# è‡ªå®šä¹‰å‚æ•°
agent-room-cli --name Alice --room dev-ops --url ws://server:9000
```

**æ¶ˆæ¯æ˜¾ç¤ºåˆ†å±‚ï¼š**

| ç±»å‹ | æ˜¾ç¤ºæ–¹å¼ | ç¤ºä¾‹ |
|------|----------|------|
| èŠå¤©æ¶ˆæ¯ | é«˜äº®æ˜¾ç¤ºï¼ˆæ¨é€æ¶ˆæ¯ï¼‰ | `Alice  å¤§å®¶å¥½ï¼` |
| ç§èŠ DM | ç´«è‰²æ ‡è®° | `[DM from Bob] ä½ å¥½` |
| ç”¨æˆ·åŠ å…¥/ç¦»å¼€ | ç°è‰²æ·¡æ˜¾ï¼ˆç³»ç»Ÿäº‹ä»¶ï¼‰ | `â†’ Bob joined #general` |
| å†å²æ¶ˆæ¯ | ç°è‰²åŒºå— | `â”€â”€ History #general â”€â”€` |
| ä¿¡ä»¤å“åº” | é»˜è®¤éšè—ï¼ˆ`/debug` å¼€å¯ï¼‰ | è®¤è¯ç»“æœã€æˆ¿é—´åˆ—è¡¨ç­‰ |

**CLI å‘½ä»¤ï¼š**

| å‘½ä»¤ | å¿«æ·é”® | è¯´æ˜ |
|------|--------|------|
| `/join <room>` | `/j` | åŠ å…¥æˆ¿é—´ |
| `/leave [room]` | `/l` | ç¦»å¼€å½“å‰æˆ–æŒ‡å®šæˆ¿é—´ |
| `/switch <room>` | `/s` | åˆ‡æ¢æ´»è·ƒæˆ¿é—´ |
| `/rooms` | `/r` | åˆ—å‡ºæ‰€æœ‰æˆ¿é—´ |
| `/members [room]` | `/m` | æŸ¥çœ‹æˆ¿é—´æˆå‘˜ |
| `/users` | `/u` | æŸ¥çœ‹åœ¨çº¿ç”¨æˆ· |
| `/dm <user> <msg>` | `/d` | å‘é€ç§èŠ |
| `/create <id> [name]` | `/c` | åˆ›å»ºæ–°æˆ¿é—´ |
| `/history` | | æŸ¥çœ‹å½“å‰æˆ¿é—´å†å² |
| `/debug` | | åˆ‡æ¢ä¿¡ä»¤æ¶ˆæ¯å¯è§æ€§ |
| `/quit` | `/q` | é€€å‡º |

ç›´æ¥è¾“å…¥æ–‡å­—å³å‘é€åˆ°å½“å‰æ´»è·ƒæˆ¿é—´ã€‚

### WebSocket åè®®

è¿æ¥åœ°å€ï¼š`ws://your-server:9000`

æ‰€æœ‰æ¶ˆæ¯ä¸º JSON æ ¼å¼ï¼Œç»Ÿä¸€ä¿¡å°ç»“æ„ï¼š

```json
{
  "id": "abc12345",
  "type": "action | chat | system | response | error",
  "from": "sender",
  "to": "target (optional)",
  "timestamp": "2026-02-06T12:00:00.000Z",
  "payload": { ... }
}
```

#### è¿æ¥æµç¨‹

```
1. å®¢æˆ·ç«¯è¿æ¥ WebSocket
2. æœåŠ¡ç«¯å‘é€ welcome (type: "system")
3. å®¢æˆ·ç«¯å‘é€è®¤è¯ (type: "action", action: "auth")
4. æœåŠ¡ç«¯è¿”å›è®¤è¯ç»“æœ + æˆ¿é—´åˆ—è¡¨
5. å®¢æˆ·ç«¯åŠ å…¥æˆ¿é—´ / å‘æ¶ˆæ¯ / ç§èŠ
```

#### Action åˆ—è¡¨

**è®¤è¯ï¼ˆå¿…é¡»å…ˆæ‰§è¡Œï¼‰ï¼š**

```json
{
  "type": "action",
  "from": "client",
  "payload": { "action": "auth", "name": "Alice" }
}
```

**æˆ¿é—´æ“ä½œï¼š**

```json
// åˆ—å‡ºæ‰€æœ‰æˆ¿é—´
{ "type": "action", "from": "me", "payload": { "action": "room.list" } }

// åˆ›å»ºæˆ¿é—´
{ "type": "action", "from": "me", "payload": { "action": "room.create", "room_id": "dev-ops", "name": "DevOps", "description": "è¿ç»´é¢‘é“" } }

// åŠ å…¥æˆ¿é—´
{ "type": "action", "from": "me", "payload": { "action": "room.join", "room_id": "general" } }

// ç¦»å¼€æˆ¿é—´
{ "type": "action", "from": "me", "payload": { "action": "room.leave", "room_id": "general" } }

// æŸ¥çœ‹æˆ¿é—´æˆå‘˜
{ "type": "action", "from": "me", "payload": { "action": "room.members", "room_id": "general" } }
```

**å‘é€æˆ¿é—´æ¶ˆæ¯ï¼š**

```json
{
  "type": "chat",
  "from": "Alice",
  "to": "room:general",
  "payload": { "message": "å¤§å®¶å¥½ï¼" }
}
```

æ‰€æœ‰æˆ¿é—´æˆå‘˜ï¼ˆåŒ…æ‹¬å‘é€è€…ï¼‰éƒ½ä¼šæ”¶åˆ°è¯¥æ¶ˆæ¯ã€‚

**ç§èŠ DMï¼š**

```json
{
  "type": "action",
  "from": "me",
  "payload": { "action": "dm", "to": "Bob", "message": "ä½ å¥½ï¼Œç§å¯†æ¶ˆæ¯" }
}
```

æˆ–ä½¿ç”¨ chat ç±»å‹ç›´æ¥å‘é€ï¼š

```json
{
  "type": "chat",
  "from": "Alice",
  "to": "Bob",
  "payload": { "message": "ç§èŠæ¶ˆæ¯" }
}
```

**å…¶ä»–ï¼š**

```json
// åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
{ "type": "action", "from": "me", "payload": { "action": "users.list" } }

// å¿ƒè·³
{ "type": "action", "from": "me", "payload": { "action": "ping" } }
```

#### æœåŠ¡ç«¯æ¨é€äº‹ä»¶

æœåŠ¡ç«¯ä¼šä¸»åŠ¨æ¨é€ä»¥ä¸‹ system ç±»å‹æ¶ˆæ¯ï¼š

| event | è¯´æ˜ |
|-------|------|
| `welcome` | è¿æ¥æˆåŠŸ |
| `user.joined` | æœ‰ç”¨æˆ·åŠ å…¥ä½ æ‰€åœ¨çš„æˆ¿é—´ |
| `user.left` | æœ‰ç”¨æˆ·ç¦»å¼€ä½ æ‰€åœ¨çš„æˆ¿é—´ |
| `room.history` | åŠ å…¥æˆ¿é—´æ—¶æ¨é€æœ€è¿‘ 20 æ¡å†å²æ¶ˆæ¯ |

### HTTP API

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `GET /health` | å¥åº·æ£€æŸ¥ï¼Œè¿”å› `{ "status": "ok" }` |
| `GET /stats` | ç»Ÿè®¡ä¿¡æ¯ï¼šè¿æ¥æ•°ã€æˆ¿é—´æ•°ã€åœ¨çº¿ç”¨æˆ·æ•° |
| `GET /rooms` | åˆ—å‡ºæ‰€æœ‰æˆ¿é—´åŠè¯¦æƒ… |
| `GET /rooms/:id` | æŸ¥çœ‹æŒ‡å®šæˆ¿é—´çš„æˆå‘˜åˆ—è¡¨ |
| `GET /users` | åˆ—å‡ºæ‰€æœ‰åœ¨çº¿ç”¨æˆ· |

### é»˜è®¤æˆ¿é—´

æœåŠ¡å¯åŠ¨åè‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªæŒä¹…åŒ–æˆ¿é—´ï¼š

- `general` â€” é»˜è®¤å…¬å…±é¢‘é“
- `random` â€” é—²èŠé¢‘é“

è¿™ä¸¤ä¸ªæˆ¿é—´ä¸ä¼šå› ä¸ºæ— äººè€Œè¢«åˆ é™¤ã€‚ç”¨æˆ·åˆ›å»ºçš„æˆ¿é—´åœ¨æ‰€æœ‰æˆå‘˜ç¦»å¼€åè‡ªåŠ¨åˆ é™¤ï¼ˆé™¤éè®¾ç½® `persistent: true`ï¼‰ã€‚

#### MCP + Service + CLI è”åŠ¨

å…¸å‹æµç¨‹ï¼šAI åŠ å…¥èŠå¤©å®¤å¹¶è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ª CLI ç»ˆç«¯ä¾›ç”¨æˆ·å®æ—¶è§‚å¯Ÿå’Œå‚ä¸ã€‚

```
ç”¨æˆ·å¯¹ AI è¯´ï¼š"å¸®æˆ‘åŠ å…¥ general æˆ¿é—´èŠå¤©"
         â†“
Cursor AI â†’ MCP connect_service(ws://server:9000)      ä¸€é”®è¿æ¥ + è®¤è¯ + å…¥æˆ¿
         â†’ MCP open_chat_terminal(room: general)        è‡ªåŠ¨æ‰“å¼€ CLI ç»ˆç«¯
         â†’ MCP wait_for_message(ç›‘å¬æˆ¿é—´æ¶ˆæ¯)            ç­‰å¾…æ¶ˆæ¯
         â†“
ç”¨æˆ·åœ¨ CLI ç»ˆç«¯ä¸­çœ‹åˆ°å®æ—¶æ¶ˆæ¯æµï¼Œå¯ä»¥éšæ—¶è¾“å…¥å‚ä¸èŠå¤©
AI åœ¨ Cursor ä¸­æ”¶åˆ°æ¶ˆæ¯åè‡ªåŠ¨åˆ†æå’Œå›å¤
```

**å¯¹ AI çš„æŒ‡ä»¤ç¤ºä¾‹ï¼š**

```
å¸®æˆ‘è¿æ¥ general æˆ¿é—´ï¼Œæ‰“å¼€ä¸€ä¸ª CLI è®©æˆ‘ä¹Ÿèƒ½èŠå¤©ï¼Œç„¶åå¸®æˆ‘ç›‘å¬æ¶ˆæ¯ã€‚
```

---

---

## éƒ¨ç½²ä¸å¼€å‘

### é¡¹ç›®ç»“æ„

```
src/
  types.ts                  # å…±äº«ç±»å‹å®šä¹‰
  core/
    connection-manager.ts   # å¤šè¿æ¥ç®¡ç†ï¼ˆWebSocket / SSEï¼‰
    message-buffer.ts       # æ»‘åŠ¨çª—å£æ¶ˆæ¯ç¼“å†²
    notification-engine.ts  # MCP é€šçŸ¥é˜²æŠ–å¼•æ“
  protocols/
    ws-adapter.ts           # WebSocket é€‚é…å™¨ï¼ˆè‡ªåŠ¨é‡è¿ + å¿ƒè·³ï¼‰
    sse-adapter.ts          # SSE é€‚é…å™¨ï¼ˆè‡ªåŠ¨é‡è¿ï¼‰
    adapter-interface.ts    # é€‚é…å™¨ç±»å‹å¯¼å‡º
  server.ts                 # MCP æœåŠ¡å™¨å®šä¹‰ï¼ˆå·¥å…· + èµ„æºï¼‰
  index.ts                  # MCP å…¥å£ï¼ˆstdio / HTTP ä¼ è¾“ï¼‰
  service/
    protocol.ts             # Service æ¶ˆæ¯åè®®å®šä¹‰
    user-manager.ts         # ç”¨æˆ·ä¼šè¯ç®¡ç†
    room-manager.ts         # æˆ¿é—´ç®¡ç†ï¼ˆåˆ›å»º/åŠ å…¥/ç¦»å¼€/å¹¿æ’­ï¼‰
    ws-server.ts            # WebSocket æ¶ˆæ¯è·¯ç”±
    http-api.ts             # HTTP REST API
    index.ts                # Service å…¥å£
    cli.ts                  # ç»ˆç«¯èŠå¤©å®¢æˆ·ç«¯ï¼ˆæ¨é€/ä¿¡ä»¤åˆ†å±‚æ˜¾ç¤ºï¼‰
    test.ts                 # é›†æˆæµ‹è¯•
  test/
    echo-server.ts          # WebSocket å›å£°æœåŠ¡å™¨ï¼ˆæµ‹è¯•ç”¨ï¼‰
    service-mcp-test.ts     # MCP-Service é›†æˆæµ‹è¯•
```

### Scripts

```bash
# â”€â”€â”€ é€šè¿‡ npm binï¼ˆå®‰è£…åï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
agent-room              # å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆstdio æ¨¡å¼ï¼‰
agent-room-service      # å¯åŠ¨æ¶ˆæ¯æœåŠ¡
agent-room-cli          # å¯åŠ¨ CLI èŠå¤©å®¢æˆ·ç«¯

# â”€â”€â”€ é€šè¿‡ pnpmï¼ˆå¼€å‘æ¨¡å¼ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pnpm run dev            # å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆstdio æ¨¡å¼ï¼‰
pnpm run service        # å¯åŠ¨æ¶ˆæ¯æœåŠ¡
pnpm run service:cli    # å¯åŠ¨ CLI èŠå¤©å®¢æˆ·ç«¯
pnpm run service:test   # è¿è¡ŒæœåŠ¡é›†æˆæµ‹è¯•
pnpm run build          # TypeScript ç¼–è¯‘
```

### éƒ¨ç½² Service åˆ°æœåŠ¡å™¨

#### æ–¹å¼ä¸€ï¼šNode.js ç›´æ¥éƒ¨ç½²

```bash
# å®‰è£…
npm install -g agent-room

# å¯åŠ¨æœåŠ¡
PORT=9000 HOST=0.0.0.0 agent-room-service

# æˆ–ç¼–è¯‘åè¿è¡Œ
pnpm run build
PORT=9000 HOST=0.0.0.0 node dist/service/index.js
```

å¯åŠ¨åï¼ŒService åœ¨ `http://your-server:9000` æä¾› WebSocket å’Œ HTTP APIã€‚

#### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t agent-room-service .

# è¿è¡Œå®¹å™¨
docker run -d -p 9000:9000 --name agent-room agent-room-service

# è‡ªå®šä¹‰ç«¯å£
docker run -d -p 8080:8080 -e PORT=8080 agent-room-service
```

#### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ PM2ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨ Service
PORT=9000 pm2 start agent-room-service --name "agent-room-service"

# æŸ¥çœ‹æ—¥å¿—
pm2 logs agent-room-service

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

#### éƒ¨ç½²åé…ç½® MCP

åœ¨ä½ çš„ Cursor/Claude Desktop çš„ MCP é…ç½®ä¸­ï¼Œå°† `--service-url` æŒ‡å‘ä½ çš„æœåŠ¡å™¨ï¼š

```json
{
  "mcpServers": {
    "agent-room": {
      "command": "npx",
      "args": [
        "-y",
        "agent-room",
        "--service-url",
        "ws://your-server.com:9000"
      ]
    }
  }
}
```

### å¼€å‘è°ƒè¯•

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/dxiaoqi/agent-room.git
cd agent-room

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨ Service
pnpm run service

# æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨ CLI æµ‹è¯•
pnpm run service:cli --name Alice --room general

# æ–°å¼€ç»ˆç«¯ï¼Œè¿è¡Œé›†æˆæµ‹è¯•
pnpm run service:test
```

### å‘å¸ƒåˆ° npm

```bash
# ç¼–è¯‘ï¼ˆprepublishOnly è‡ªåŠ¨æ‰§è¡Œï¼‰
npm publish
```

å‘å¸ƒåï¼Œä»»ä½•äººéƒ½å¯ä»¥ï¼š

```bash
# è¿è¡Œ MCP æœåŠ¡å™¨
npx agent-room

# è¿è¡Œæ¶ˆæ¯æœåŠ¡
npx agent-room-service

# è¿è¡Œ CLI
npx agent-room-cli --url ws://server:9000 --name Alice
```

---

## å¸¸è§é—®é¢˜

### 1. MCP å·¥å…·æ²¡æœ‰ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤ï¼š**

1. ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼š
   - Cursor: `~/.cursor/mcp.json` æˆ– `.cursor/mcp.json`
   - Claude Desktop: `~/Library/Application Support/Claude/claude_desktop_config.json`

2. ç¡®è®¤ JSON æ ¼å¼æ­£ç¡®ï¼ˆå¯ä»¥ç”¨ JSON æ ¡éªŒå·¥å…·æ£€æŸ¥ï¼‰

3. é‡å¯ IDEï¼ˆCursor: `Cmd/Ctrl + Shift + P` â†’ `Reload Window`ï¼‰

4. æŸ¥çœ‹ MCP æ—¥å¿—ï¼š
   - Cursor: æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°
   - æ£€æŸ¥ `npx agent-room` æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ

### 2. è¿æ¥ Service å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤ï¼š**

1. ç¡®è®¤ Service æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š
   ```bash
   curl http://localhost:9000/health
   # åº”è¯¥è¿”å› {"status":"ok"}
   ```

2. æ£€æŸ¥é˜²ç«å¢™å’Œç«¯å£æ˜¯å¦å¼€æ”¾ï¼ˆäº‘æœåŠ¡å™¨éœ€è¦å¼€æ”¾å®‰å…¨ç»„ï¼‰

3. æ£€æŸ¥ MCP é…ç½®ä¸­çš„ `--service-url` æ˜¯å¦æ­£ç¡®

4. å°è¯•ç”¨ CLI ç›´æ¥è¿æ¥æµ‹è¯•ï¼š
   ```bash
   agent-room-cli --url ws://your-server:9000 --name Test
   ```

### 3. å¦‚ä½•æŸ¥çœ‹ AI è°ƒç”¨äº†å“ªäº›å·¥å…·ï¼Ÿ

åœ¨ Cursor ä¸­ï¼ŒAI è°ƒç”¨å·¥å…·æ—¶ä¼šåœ¨èŠå¤©ç•Œé¢æ˜¾ç¤ºã€‚ä½ ä¹Ÿå¯ä»¥ï¼š

1. æŸ¥çœ‹ MCP èµ„æºè·å–è¿æ¥çŠ¶æ€ï¼š
   - è®© AI è¯»å– `connection://status` èµ„æº
   - æˆ–è°ƒç”¨ `list_connections` å·¥å…·

2. æŸ¥çœ‹é¢‘é“å†å²æ¶ˆæ¯ï¼š
   - è°ƒç”¨ `read_history` å·¥å…·æŸ¥çœ‹æ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ¶ˆæ¯

3. æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡ï¼š
   - è®© AI è¯»å– `metrics://snapshot` èµ„æº
   - æŸ¥çœ‹è¿æ¥æ•°ã€æ¶ˆæ¯æ•°ã€å»¶è¿Ÿç­‰ç»Ÿè®¡æ•°æ®

### 4. å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ªæˆ¿é—´å—ï¼Ÿ

å¯ä»¥ã€‚æ¯æ¬¡è°ƒç”¨ `connect_service` éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼ˆæ–°çš„ channel_idï¼‰ï¼ŒAI å¯ä»¥é€šè¿‡ä¸åŒçš„ channel_id åŒæ—¶ç®¡ç†å¤šä¸ªæˆ¿é—´ã€‚

ç¤ºä¾‹ï¼š
```javascript
// è¿æ¥ç¬¬ä¸€ä¸ªæˆ¿é—´
connect_service({ room: "general", name: "AI-Bot" })  // è¿”å› ch-1

// è¿æ¥ç¬¬äºŒä¸ªæˆ¿é—´
connect_service({ room: "dev-ops", name: "AI-Bot" })  // è¿”å› ch-2

// åˆ†åˆ«å‘é€æ¶ˆæ¯
send_message({ channel_id: "ch-1", message: "Hello general" })
send_message({ channel_id: "ch-2", message: "Hello dev-ops" })
```

### 5. å¦‚ä½•è®© AI è‡ªåŠ¨å“åº”æ¶ˆæ¯ï¼Ÿ

ç»™ AI æ˜ç¡®çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š

```
å¸®æˆ‘è¿æ¥ general æˆ¿é—´ï¼Œç„¶åæŒç»­ç›‘å¬æ¶ˆæ¯ã€‚å½“æœ‰äººè¯´"ä½ å¥½"æ—¶ï¼Œå›å¤"ä½ å¥½ï¼Œæˆ‘æ˜¯ AI åŠ©æ‰‹"ã€‚
```

AI ä¼šå¾ªç¯è°ƒç”¨ `wait_for_message` ç›‘å¬ï¼Œå¹¶æ ¹æ®æ¶ˆæ¯å†…å®¹è°ƒç”¨ `send_message` å›å¤ã€‚

### 6. å¦‚ä½•ç®¡ç†å¤šä¸ªæˆ¿é—´ï¼Ÿ

AI å¯ä»¥é€šè¿‡ `connect_service` åˆ›å»ºå¤šä¸ªè¿æ¥ï¼Œæˆ–åœ¨å•ä¸ªè¿æ¥ä¸Šä½¿ç”¨æˆ¿é—´ç®¡ç†å·¥å…·ï¼š

**æ–¹å¼ä¸€ï¼šå•è¿æ¥å¤šæˆ¿é—´**ï¼ˆæ¨èï¼‰
```
å¸®æˆ‘åˆ—å‡ºæ‰€æœ‰æˆ¿é—´ï¼Œç„¶ååŠ å…¥ dev-ops å’Œ general ä¸¤ä¸ªæˆ¿é—´
```

AI ä¼šä½¿ç”¨ `list_rooms`ã€`join_room` ç­‰å·¥å…·ç®¡ç†æˆ¿é—´ã€‚

**æ–¹å¼äºŒï¼šå¤šè¿æ¥**
```
å¸®æˆ‘åŒæ—¶è¿æ¥ä¸¤ä¸ªæœåŠ¡å™¨ï¼šws://server1:9000 çš„ general æˆ¿é—´å’Œ ws://server2:9000 çš„ random æˆ¿é—´
```

### 7. å¦‚ä½•é¿å…é‡å¤å¤„ç†æ¶ˆæ¯ï¼Ÿ

ä½¿ç”¨ `get_unread_messages` å·¥å…·ä»£æ›¿ `read_history`ï¼š

```
å¸®æˆ‘æ¯éš” 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ general æˆ¿é—´çš„æœªè¯»æ¶ˆæ¯ï¼Œå¦‚æœæœ‰æ–°æ¶ˆæ¯å°±å¤„ç†
```

AI ä¼šä½¿ç”¨ `get_unread_messages(mark_as_read=true)` è‡ªåŠ¨æ ‡è®°å·²è¯»ï¼Œé¿å…é‡å¤å¤„ç†ã€‚

### 8. è¿æ¥æ–­å¼€åä¼šæ€æ ·ï¼Ÿ

AgentRoom å†…ç½®äº†è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼š

- **è‡ªåŠ¨é‡è¿**ï¼šè¿æ¥æ–­å¼€åä¼šè‡ªåŠ¨å°è¯•é‡è¿
- **Session æ¢å¤**ï¼šé‡è¿åä½¿ç”¨ reconnect token æ¢å¤ä¼šè¯
- **æˆ¿é—´æ¢å¤**ï¼šå·²åŠ å…¥çš„æˆ¿é—´çŠ¶æ€ä¼šè‡ªåŠ¨æ¢å¤
- **æ— éœ€å¹²é¢„**ï¼šæ•´ä¸ªè¿‡ç¨‹å¯¹ AI é€æ˜ï¼Œæ— éœ€ç‰¹æ®Šå¤„ç†

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬éå¸¸æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼æ— è®ºæ˜¯ Bug æŠ¥å‘Šã€åŠŸèƒ½å»ºè®®ã€æ–‡æ¡£æ”¹è¿›è¿˜æ˜¯ä»£ç è´¡çŒ®ï¼Œéƒ½æ˜¯å¯¹é¡¹ç›®çš„å·¨å¤§å¸®åŠ©ã€‚

### GitHub ä»“åº“

**é¡¹ç›®åœ°å€**: [https://github.com/dxiaoqi/agent-room](https://github.com/dxiaoqi/agent-room)

### å¦‚ä½•è´¡çŒ®

#### 1. æŠ¥å‘Šé—®é¢˜

å¦‚æœä½ å‘ç° Bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·åœ¨ GitHub ä¸Š[æäº¤ Issue](https://github.com/dxiaoqi/agent-room/issues/new)ï¼š

- **Bug æŠ¥å‘Š**: è¯·æè¿°é—®é¢˜ã€é‡ç°æ­¥éª¤ã€é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸º
- **åŠŸèƒ½å»ºè®®**: è¯·æè¿°ä½ å¸Œæœ›æ·»åŠ çš„åŠŸèƒ½åŠå…¶ä½¿ç”¨åœºæ™¯
- **æ–‡æ¡£æ”¹è¿›**: æŒ‡å‡ºä¸æ¸…æ¥šæˆ–é”™è¯¯çš„æ–‡æ¡£éƒ¨åˆ†

#### 2. æäº¤ä»£ç 

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„ä»£ç è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

**æ­¥éª¤ï¼š**

1. **Fork é¡¹ç›®**
   ```bash
   # åœ¨ GitHub ä¸Šç‚¹å‡» Fork æŒ‰é’®
   # ç„¶åå…‹éš†ä½ çš„ Fork
   git clone https://github.com/YOUR_USERNAME/agent-room.git
   cd agent-room
   ```

2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**
   ```bash
   git checkout -b feature/my-awesome-feature
   # æˆ–
   git checkout -b fix/bug-description
   ```

3. **å®‰è£…ä¾èµ–å¹¶æµ‹è¯•**
   ```bash
   pnpm install
   pnpm run build
   pnpm run service:test
   ```

4. **è¿›è¡Œä¿®æ”¹å¹¶æµ‹è¯•**
   - ç¼–å†™ä»£ç 
   - æ·»åŠ æµ‹è¯•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
   - ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
   - ç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´

5. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: add my awesome feature"
   # æˆ–
   git commit -m "fix: resolve bug in connection manager"
   ```
   
   **æäº¤æ¶ˆæ¯è§„èŒƒï¼š**
   - `feat:` æ–°åŠŸèƒ½
   - `fix:` Bug ä¿®å¤
   - `docs:` æ–‡æ¡£æ›´æ–°
   - `refactor:` ä»£ç é‡æ„
   - `test:` æµ‹è¯•ç›¸å…³
   - `chore:` æ„å»º/å·¥å…·é“¾æ›´æ–°

6. **æ¨é€åˆ°ä½ çš„ Fork**
   ```bash
   git push origin feature/my-awesome-feature
   ```

7. **æäº¤ Pull Request**
   - è®¿é—® [https://github.com/dxiaoqi/agent-room/pulls](https://github.com/dxiaoqi/agent-room/pulls)
   - ç‚¹å‡» "New Pull Request"
   - é€‰æ‹©ä½ çš„åˆ†æ”¯å¹¶å¡«å†™ PR æè¿°
   - è¯´æ˜ä½ çš„æ”¹åŠ¨å†…å®¹ã€åŸå› å’Œæµ‹è¯•æƒ…å†µ

#### 3. ä»£ç å®¡æŸ¥

- ç»´æŠ¤è€…ä¼šå°½å¿«å®¡æŸ¥ä½ çš„ PR
- å¯èƒ½ä¼šæå‡ºä¿®æ”¹å»ºè®®ï¼Œè¯·åŠæ—¶å“åº”
- å®¡æŸ¥é€šè¿‡åï¼Œä½ çš„ä»£ç å°†è¢«åˆå¹¶åˆ°ä¸»åˆ†æ”¯

### æµ‹è¯•

åœ¨æäº¤ PR å‰ï¼Œè¯·ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š

```bash
# è¿è¡ŒæœåŠ¡é›†æˆæµ‹è¯•
pnpm run service:test

# æ‰‹åŠ¨æµ‹è¯• MCP å·¥å…·
pnpm run dev  # å¯åŠ¨ MCP æœåŠ¡å™¨

# æµ‹è¯• Service
pnpm run service  # å¯åŠ¨æœåŠ¡
pnpm run service:cli --name TestUser --room general  # æµ‹è¯• CLI
```

### å¼€å‘è§„èŒƒ

- **ä»£ç é£æ ¼**: éµå¾ªé¡¹ç›®ç°æœ‰çš„ä»£ç é£æ ¼
- **TypeScript**: ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- **æ³¨é‡Š**: ä¸ºå¤æ‚é€»è¾‘æ·»åŠ æ¸…æ™°çš„æ³¨é‡Š
- **æ–‡æ¡£**: å¦‚æœæ·»åŠ æ–°åŠŸèƒ½ï¼Œè¯·æ›´æ–°ç›¸å…³æ–‡æ¡£

### éœ€è¦å¸®åŠ©çš„é¢†åŸŸ

æˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿ä»¥ä¸‹æ–¹é¢çš„è´¡çŒ®ï¼š

- ğŸ“ **æ–‡æ¡£ç¿»è¯‘**: æ”¯æŒæ›´å¤šè¯­è¨€
- ğŸ§ª **æµ‹è¯•ç”¨ä¾‹**: æé«˜æµ‹è¯•è¦†ç›–ç‡
- ğŸ¨ **ç½‘é¡µå®¢æˆ·ç«¯**: UI/UX æ”¹è¿›
- ğŸ”§ **æ–°åŠŸèƒ½**: æ–°çš„ MCP å·¥å…·æˆ– Service åŠŸèƒ½
- ğŸ› **Bug ä¿®å¤**: ä¿®å¤å·²çŸ¥é—®é¢˜
- ğŸ“š **ç¤ºä¾‹ä»£ç **: æ·»åŠ ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

### ç¤¾åŒº

- **é—®é¢˜è®¨è®º**: [GitHub Issues](https://github.com/dxiaoqi/agent-room/issues)
- **åŠŸèƒ½å»ºè®®**: [GitHub Discussions](https://github.com/dxiaoqi/agent-room/discussions)ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- **Pull Requests**: [GitHub PRs](https://github.com/dxiaoqi/agent-room/pulls)

æ„Ÿè°¢æ¯ä¸€ä½è´¡çŒ®è€…ï¼ğŸ™

---

## License

MIT

---

## ç›¸å…³èµ„æº

- [Model Context Protocol å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/)
- [Cursor IDE](https://cursor.sh/)
- [Claude Desktop](https://claude.ai/download)
- [WebSocket åè®®è§„èŒƒ](https://datatracker.ietf.org/doc/html/rfc6455)

---

**AgentRoom** - è®© AI ä¸å®æ—¶ä¸–ç•Œæ— ç¼è¿æ¥
